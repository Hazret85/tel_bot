# tel_bot

Этот проект представляет собой простого Telegram-бота, который показывает погоду в указанном городе, и REST API для получения логов бота.

# Telegram-бот
## Функционал:

Отвечает на команду /start, предлагая пользователю ввести название города.

При получении названия города отправляет запрос к API OpenWeatherMap для получения данных о погоде.

Возвращает пользователю сообщение с температурой и описанием погоды в указанном городе.

Все запросы пользователей и ответы бота логируются в базу данных SQLite.

Использование:

Добавьте бота в Telegram.

Отправьте команду /start.

Введите название города, чтобы узнать погоду.

# REST API
Базовый URL: http://localhost:5000

Endpoints:

1. Получение всех логов
URL: /logs

Метод: GET

Параметры запроса:

page: Номер страницы (по умолчанию: 1)

per_page: Количество логов на странице (по умолчанию: 10)

start_date: Дата начала периода (формат: YYYY-MM-DD)

end_date: Дата окончания периода (формат: YYYY-MM-DD)

Ответ: JSON-массив с логами бота.

Пример запроса:

http://localhost:5000/logs?page=2&per_page=5&start_date=2023-10-26&end_date=2023-10-27

2. Получение логов по ID пользователя
URL: /logs/<user_id>

Метод: GET

Параметры пути:

user_id: ID пользователя Telegram

Параметры запроса:

page: Номер страницы (по умолчанию: 1)

per_page: Количество логов на странице (по умолчанию: 10)

Ответ: JSON-массив с логами бота для указанного пользователя.

Пример запроса:

http://localhost:5000/logs/123456789?page=1&per_page=20

Структура лога
Каждый лог в ответе API содержит следующие поля:

id: ID лога

user_id: ID пользователя Telegram

username: Имя пользователя Telegram

command: Команда, отправленная пользователем

message: Текст сообщения пользователя

response: Ответ бота

timestamp: Время создания лога (ISO 8601)

Запуск проекта
Установите зависимости:

pip install -r requirements.txt
Use code with caution.
Bash
Запустите сервер Flask:

python main.py
Use code with caution.
Bash
Примечания
Для работы бота необходимо указать токен бота в переменной API_TOKEN в файле bot.py.

Для работы API погоды необходимо указать ключ API OpenWeatherMap в переменной WEATHER_API_KEY в файле bot.py.

База данных SQLite bot_logs.db будет создана автоматически при первом запуске приложения.
